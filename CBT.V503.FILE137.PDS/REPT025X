//REPT025X JOB CLASS=A,MSGCLASS=X,REGION=1M,NOTIFY=&SYSUID
//****************************************************************
//* $$$$  THIS JOB IS USED WITH THE REPT015 JOBS  $$$$           *
//*   THE MAIN DIFFERNCE IS THE REPT015 PROGRAM USES VSAM WORKS  *
//*   TO CREATE THE "T" HISTORY RECORDS                          *
//****************************************************************
//*   THIS JOB WILL CREATE A FILE THAT HAS THE REPORT_IDS BY     *
//*   DATE THAT SHOULD BE DELETED                                *
//****************************************************************
//STEP032  EXEC PGM=IDCAMS,COND=(8,LT)
//SYSPRINT DD SYSOUT=*
//SYSOUT   DD SYSOUT=*
//SYSIN    DD *
   DELETE OPT.PRINT.PURGED.SEQ
   DELETE OPT.PRINT.PURGEDI.SEQ
   DELETE OPT.PRINT.MERGEDT.SEQ
   DELETE OPT.PRINT.SORTEDT.SEQ
//****************************************************************
//*   MERGE THE T RECORDS  INTO ONE FILE                         *
//****************************************************************
//*    PUT ALL OF THE NEW "T" RECORD FILES IN THIS MERGE STEP    *
//****************************************************************
//STEP033  EXEC PGM=SORT,COND=(8,LT),REGION=4M,
//      PARM=('MSGDDN=SORTMSG,MSGPRT=ALL')
//SYSUDUMP DD SYSOUT=*
//SORTMSG  DD SYSOUT=*
//SYSOUT   DD SYSOUT=*
//SORTWK01 DD UNIT=SYSDA,SPACE=(CYL,(1,1))
//SORTWK02 DD UNIT=SYSDA,SPACE=(CYL,(1,1))
//SORTWK03 DD UNIT=SYSDA,SPACE=(CYL,(1,1))
//SORTIN01 DD DSN=OPT.PRINT.CICS.WORK1.FILE,DISP=SHR
//SORTIN02 DD DSN=OPT.PRINT.CICS.WORK2.FILE,DISP=SHR
//SORTIN03 DD DSN=OPT.CICS.REPORT.HISTORY.FILE,DISP=SHR
//SORTOUT  DD DSN=OPT.PRINT.MERGEDT.SEQ,DISP=(NEW,CATLG,DELETE),
//            DCB=(LRECL=100,BLKSIZE=8000,RECFM=FB,BUFNO=10),
//            SPACE=(CYL,(1,1),RLSE),UNIT=SYSDA
//SYSIN    DD *
  RECORD TYPE=F
  OMIT COND=(1,1,CH,NE,C'T')
  MERGE FIELDS=(1,31,A),FORMAT=BI
/*
//****************************************************************
//*   SORT THE T RECORDS BY REPORT-ID AND DATE                   *
//****************************************************************
//STEP035  EXEC PGM=SORT,COND=(8,LT),REGION=4M,
//      PARM=('MSGDDN=SORTMSG,MSGPRT=ALL')
//SYSUDUMP DD SYSOUT=*
//SORTMSG  DD SYSOUT=*
//SYSOUT   DD SYSOUT=*
//SORTWK01 DD UNIT=SYSDA,SPACE=(CYL,(1,1))
//SORTWK02 DD UNIT=SYSDA,SPACE=(CYL,(1,1))
//SORTIN   DD DSN=OPT.PRINT.MERGEDT.SEQ,DISP=SHR,DCB=BUFNO=10
//SORTOUT  DD DSN=OPT.PRINT.SORTEDT.SEQ,DISP=(NEW,CATLG,DELETE),
//            DCB=(LRECL=100,BLKSIZE=8000,RECFM=FB,BUFNO=10),
//            SPACE=(CYL,(1,1),RLSE),UNIT=SYSDA
//SYSIN    DD *
  RECORD TYPE=F
  SORT FIELDS=(06,8,A,22,6,D),FORMAT=BI
/*
//****************************************************************
//*   BUILD THE REPORTS TO BE PURGED                             *
//****************************************************************
//STEP036  EXEC PGM=REPT025,COND=(8,LT)
//STEPLIB  DD DSN=OPT.WORK.LOADLIB,DISP=SHR
//SYSUDUMP DD SYSOUT=*
//SYSPRINT DD SYSOUT=*
//SYSOUT   DD SYSOUT=*
//TRECS    DD DSN=OPT.PRINT.SORTEDT.SEQ,DISP=SHR
//PURGED   DD DSN=OPT.PRINT.PURGED.SEQ,DISP=(,CATLG,CATLG),UNIT=SYSDA,
//     DCB=(LRECL=14,BLKSIZE=2800,RECFM=FB,BUFNO=10),SPACE=(TRK,(1,1))
//PURGEDI  DD DSN=OPT.PRINT.PURGEDI.SEQ,DISP=(,CATLG,CATLG),UNIT=SYSDA,
//     DCB=(LRECL=22,BLKSIZE=4400,RECFM=FB,BUFNO=10),SPACE=(TRK,(1,1))
//TITLE    DD DSN=OPT.CICS.REPORT.TITLE.FILE,DISP=SHR
